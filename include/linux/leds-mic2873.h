/*
 * leds-mic2873.h - Flash-led driver for Maxim MIC2873
 *
 * Copyright (C) 2011 Samsung Electronics
 * ByungChang Cha <bc.cha@samsung.com>
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 as
 * published by the Free Software Foundation.
 */

#ifndef __LEDS_MIC2873_H__
#define __LEDS_MIC2873_H__
#if 0
#define MIC2873_FLASH_IOUT		0x15
#define MIC2873_TORCH_IOUT		0x0F

/* MIC2873_TORCH_TIMER */
#define MIC2873_TORCH_TMR_DUR		0x0F
#define MIC2873_DIS_TORCH_TMR		0x40
#define MIC2873_TORCH_TMR_MODE		0x80
#define MIC2873_TORCH_TMR_MODE_ONESHOT	0x00
#define MIC2873_TORCH_TMR_MDOE_MAXTIMER	0x01

/* MIC2873_FLASH_TIMER */
#define MIC2873_FLASH_TMR_DUR		0x0F
#define MIC2873_FLASH_TMR_MODE		0x80
/* MIC2873_FLASH_TMR_MODE value */
#define MIC2873_FLASH_TMR_MODE_ONESHOT	0x00
#define MIC2873_FLASH_TMR_MDOE_MAXTIMER	0x01

/* MIC2873_FLASH_EN */
#define MIC2873_TORCH_FLED1_EN		0x0C
#define MIC2873_FLASH_FLED1_EN		0xC0
/* MIC2873_TORCH_FLEDx_EN value */
#define MIC2873_TORCH_OFF		0x00
#define MIC2873_TORCH_BY_FLASHEN	0x01
#define MIC2873_TORCH_BY_TORCHEN	0x02
#define MIC2873_TORCH_BY_I2C		0X03
/* MIC2873_FLASH_FLEDx_EN value */
#define MIC2873_FLASH_OFF		0x00
#define MIC2873_FLASH_BY_FLASHEN	0x01
#define MIC2873_FLASH_BY_TORCHEN	0x02
#define MIC2873_FLASH_BY_I2C		0x03

/* MIC2873_VOUT_CNTL */
#define MIC2873_BOOST_FLASH_MODE	0x07
#define MIC2873_BOOST_FLASH_FLEDNUM	0x80
/* MIC2873_BOOST_FLASH_MODE vaule*/
#define MIC2873_BOOST_FLASH_MODE_OFF	0x00
#define MIC2873_BOOST_FLASH_MODE_FLED1	0x01
#define MIC2873_BOOST_FLASH_MODE_FLED2	0x02
#define MIC2873_BOOST_FLASH_MODE_BOTH	0x03
#define MIC2873_BOOST_FLASH_MODE_FIXED	0x04
/* MIC2873_BOOST_FLASH_FLEDNUM vaule*/
#define MIC2873_BOOST_FLASH_FLEDNUM_1	0x00
#define MIC2873_BOOST_FLASH_FLEDNUM_2	0x80

/* MIC2873_VOUT_FLASH1 */
#define MIC2873_BOOST_VOUT_FLASH	0x7F
#define MIC2873_BOOST_VOUT_FLASH_FROM_VOLT(mV)				\
		((mV) <= 3300 ? 0x00 :					\
		((mV) <= 5500 ? (((mV) - 3300) / 25 + 0x0C) : 0x7F))

#define MAX_FLASH_CURRENT	1000	/* 1000mA(0x1f) */
#define MAX_TORCH_CURRENT	250	/* 250mA(0x0f) */
#define MAX_FLASH_DRV_LEVEL	63	/* 15.625 + 15.625*63 mA */
#define MAX_TORCH_DRV_LEVEL	15	/* 15.625 + 15.625*15 mA */
#endif
enum mic2873_led_id {
	MIC2873_FLASH_LED_1,
	MIC2873_TORCH_LED_1,
	MIC2873_LED_MAX,
};
#if 0
enum mic2873_led_time {
	MIC2873_FLASH_TIME_62P5MS,
	MIC2873_FLASH_TIME_125MS,
	MIC2873_FLASH_TIME_187P5MS,
	MIC2873_FLASH_TIME_250MS,
	MIC2873_FLASH_TIME_312P5MS,
	MIC2873_FLASH_TIME_375MS,
	MIC2873_FLASH_TIME_437P5MS,
	MIC2873_FLASH_TIME_500MS,
	MIC2873_FLASH_TIME_562P5MS,
	MIC2873_FLASH_TIME_625MS,
	MIC2873_FLASH_TIME_687P5MS,
	MIC2873_FLASH_TIME_750MS,
	MIC2873_FLASH_TIME_812P5MS,
	MIC2873_FLASH_TIME_875MS,
	MIC2873_FLASH_TIME_937P5MS,
	MIC2873_FLASH_TIME_1000MS,
	MIC2873_FLASH_TIME_MAX,
};

enum mic2873_torch_time {
	MIC2873_TORCH_TIME_262MS,
	MIC2873_TORCH_TIME_524MS,
	MIC2873_TORCH_TIME_786MS,
	MIC2873_TORCH_TIME_1048MS,
	MIC2873_TORCH_TIME_1572MS,
	MIC2873_TORCH_TIME_2096MS,
	MIC2873_TORCH_TIME_2620MS,
	MIC2873_TORCH_TIME_3114MS,
	MIC2873_TORCH_TIME_4193MS,
	MIC2873_TORCH_TIME_5242MS,
	MIC2873_TORCH_TIME_6291MS,
	MIC2873_TORCH_TIME_7340MS,
	MIC2873_TORCH_TIME_9437MS,
	MIC2873_TORCH_TIME_11534MS,
	MIC2873_TORCH_TIME_13631MS,
	MIC2873_TORCH_TIME_15728MS,
	MIC2873_TORCH_TIME_MAX,
};
#endif
#if 1
enum mic2873_reg_addr {
	MIC2873_REG_ADDR_FLASH_CURRENT = 2,
	MIC2873_REG_ADDR_TORCH_CURRENT,
	MIC2873_REG_ADDR_SAFETY_TIMER_DURATION,
	MIC2873_REG_ADDR_LOW_BATTERY_VOLTAGE_DETECTION_THRESHOLD,
	MIC2873_REG_ADDR_SAFETY_TIMER_CURRENT_DETECTION_THRESHOLD,
	MIC2873_REG_ADDR_MAX,
};

enum mic2873_flash_current {
	MIC2873_FLASH_CURRENT_FEN0_1P200 = 1,
	MIC2873_FLASH_CURRENT_FEN0_1P150,
	MIC2873_FLASH_CURRENT_FEN0_1P100,
	MIC2873_FLASH_CURRENT_FEN0_1P050,
	MIC2873_FLASH_CURRENT_FEN0_1P000,
	MIC2873_FLASH_CURRENT_FEN0_0P950,
	MIC2873_FLASH_CURRENT_FEN0_0P900,
	MIC2873_FLASH_CURRENT_FEN0_0P850,
	MIC2873_FLASH_CURRENT_FEN0_0P800,
	MIC2873_FLASH_CURRENT_FEN0_0P750,
	MIC2873_FLASH_CURRENT_FEN0_0P700,
	MIC2873_FLASH_CURRENT_FEN0_0P650,
	MIC2873_FLASH_CURRENT_FEN0_0P600,
	MIC2873_FLASH_CURRENT_FEN0_0P550,
	MIC2873_FLASH_CURRENT_FEN0_0P400,
	MIC2873_FLASH_CURRENT_FEN0_0P250,
	MIC2873_FLASH_CURRENT_FEN1_1P200,
	MIC2873_FLASH_CURRENT_FEN1_1P150,
	MIC2873_FLASH_CURRENT_FEN1_1P100,
	MIC2873_FLASH_CURRENT_FEN1_1P050,
	MIC2873_FLASH_CURRENT_FEN1_1P000,
	MIC2873_FLASH_CURRENT_FEN1_0P950,
	MIC2873_FLASH_CURRENT_FEN1_0P900,
	MIC2873_FLASH_CURRENT_FEN1_0P850,
	MIC2873_FLASH_CURRENT_FEN1_0P800,
	MIC2873_FLASH_CURRENT_FEN1_0P750,
	MIC2873_FLASH_CURRENT_FEN1_0P700,
	MIC2873_FLASH_CURRENT_FEN1_0P650,
	MIC2873_FLASH_CURRENT_FEN1_0P600,
	MIC2873_FLASH_CURRENT_FEN1_0P550,
	MIC2873_FLASH_CURRENT_FEN1_0P400,
	MIC2873_FLASH_CURRENT_FEN1_0P250,
	MIC2873_FLASH_CURRENT_MAX,
};


enum mic2873_torch_current {
	MIC2873_TORCH_CURRENT_TEN0_300P0 = 1,
	MIC2873_TORCH_CURRENT_TEN0_287P5,
	MIC2873_TORCH_CURRENT_TEN0_275P0,
	MIC2873_TORCH_CURRENT_TEN0_262P5,
	MIC2873_TORCH_CURRENT_TEN0_250P0,
	MIC2873_TORCH_CURRENT_TEN0_237P5,
	MIC2873_TORCH_CURRENT_TEN0_225P0,
	MIC2873_TORCH_CURRENT_TEN0_212P5,
	MIC2873_TORCH_CURRENT_TEN0_200P0,
	MIC2873_TORCH_CURRENT_TEN0_187P5,
	MIC2873_TORCH_CURRENT_TEN0_175P0,
	MIC2873_TORCH_CURRENT_TEN0_162P5,
	MIC2873_TORCH_CURRENT_TEN0_150P0,
	MIC2873_TORCH_CURRENT_TEN0_137P5,
	MIC2873_TORCH_CURRENT_TEN0_100P0,
	MIC2873_TORCH_CURRENT_TEN0_062P5,
	MIC2873_TORCH_CURRENT_TEN1_300P0,
	MIC2873_TORCH_CURRENT_TEN1_287P5,
	MIC2873_TORCH_CURRENT_TEN1_275P0,
	MIC2873_TORCH_CURRENT_TEN1_262P5,
	MIC2873_TORCH_CURRENT_TEN1_250P0,
	MIC2873_TORCH_CURRENT_TEN1_237P5,
	MIC2873_TORCH_CURRENT_TEN1_225P0,
	MIC2873_TORCH_CURRENT_TEN1_212P5,
	MIC2873_TORCH_CURRENT_TEN1_200P0,
	MIC2873_TORCH_CURRENT_TEN1_187P5,
	MIC2873_TORCH_CURRENT_TEN1_175P0,
	MIC2873_TORCH_CURRENT_TEN1_162P5,
	MIC2873_TORCH_CURRENT_TEN1_150P0,
	MIC2873_TORCH_CURRENT_TEN1_137P5,
	MIC2873_TORCH_CURRENT_TEN1_100P0,
	MIC2873_TORCH_CURRENT_TEN1_062P5,
	MIC2873_TORCH_CURRENT_MAX,
};

enum mic2873_safety_duration {
	MIC2873_SAFETY_TIMER_DURATION_0156P25MS = 1,
	MIC2873_SAFETY_TIMER_DURATION_0312P50MS,
	MIC2873_SAFETY_TIMER_DURATION_0468P75MS,
	MIC2873_SAFETY_TIMER_DURATION_0625P00MS,
	MIC2873_SAFETY_TIMER_DURATION_0781P25MS,
	MIC2873_SAFETY_TIMER_DURATION_0937P50MS,
	MIC2873_SAFETY_TIMER_DURATION_1093P75MS,
	MIC2873_SAFETY_TIMER_DURATION_1250P00MS,
	MIC2873_SAFETY_TIMER_DURATION_MAX,
};

enum mic2873_low_voltage {
	MIC2873_LOW_VOLTAGE_THRESHOLD_DISABLE = 1,
	MIC2873_LOW_VOLTAGE_THRESHOLD_3P0V,
	MIC2873_LOW_VOLTAGE_THRESHOLD_3P1V,
	MIC2873_LOW_VOLTAGE_THRESHOLD_3P2V,
	MIC2873_LOW_VOLTAGE_THRESHOLD_3P3V,
	MIC2873_LOW_VOLTAGE_THRESHOLD_3P4V,
	MIC2873_LOW_VOLTAGE_THRESHOLD_3P5V,
	MIC2873_LOW_VOLTAGE_THRESHOLD_3P6V,
	MIC2873_LOW_VOLTAGE_THRESHOLD_3P7V,
	MIC2873_LOW_VOLTAGE_THRESHOLD_3P8V,
	MIC2873_LOW_VOLTAGE_THRESHOLD_MAX,
};

enum mic2873_safety_time_current {
	MIC2873_SAFETY_TIMER_CURRENT_THRESHOLD_DISABLE = 1,
	MIC2873_SAFETY_TIMER_CURRENT_THRESHOLD_100MA,
	MIC2873_SAFETY_TIMER_CURRENT_THRESHOLD_150MA,
	MIC2873_SAFETY_TIMER_CURRENT_THRESHOLD_200MA,
	MIC2873_SAFETY_TIMER_CURRENT_THRESHOLD_250MA,
	MIC2873_SAFETY_TIMER_CURRENT_THRESHOLD_300MA,
	MIC2873_SAFETY_TIMER_CURRENT_THRESHOLD_MAX,
};

enum mic2873_operation_switch {
	MIC2873_OP_SWITCH_OFF,
	MIC2873_OP_SWITCH_ON,
	MIC2873_OP_SWITCH_MAX,
};

#endif

enum mic2873_timer_mode {
	MIC2873_TIMER_MODE_ONE_SHOT,
	MIC2873_TIMER_MODE_MAX_TIMER,
};

enum mic2873_led_cntrl_mode {
	MIC2873_LED_CTRL_BY_FLASHSTB,
	MIC2873_LED_CTRL_BY_I2C,
};

struct mic2873_dev {
	struct device *dev;
	struct mic2873_platform_data *pdata;
};

struct mic2873_led {
	const char			*name;
	const char			*default_trigger;
	int				id;
	int				timer;
	int				brightness;
	enum mic2873_timer_mode	timer_mode;
	enum mic2873_led_cntrl_mode	cntrl_mode;
};

struct mic2873_platform_data {
	int num_leds;
	struct mic2873_led leds[MIC2873_LED_MAX];
};

extern int mic2873_led_en(int onoff, int mode);

#endif
